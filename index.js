(()=>{"use strict";var e={129:(e,t,n)=>{n.r(t)},686:(e,t,n)=>{n.r(t)},243:(e,t,n)=>{n.r(t)},23:(e,t,n)=>{n.r(t)},297:(e,t,n)=>{n.r(t)},138:(e,t,n)=>{n.r(t)},607:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(new(s(n(866)).default)).run()},866:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(312)),r=s(n(790)),a=s(n(91)),i=s(n(993)),d=s(n(760)),c=s(n(95));t.default=class{run(){const e=window.location.hash.slice(1);this.renderNewPage(e),this.enableRouteChange()}enableRouteChange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);this.renderNewPage(e)}))}renderNewPage(e){let t=null;switch(e){case"":case"main-page":t=new o.default;break;case"book-page":t=new r.default;break;case"audiocall-page":t=new a.default;break;case"sprint-page":t=new i.default;break;case"statistics-page":t=new d.default;break;default:t=new c.default}t.render()}}},221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.backendDeploy="rslang-backend-team8"}}},704:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function i(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}d((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(221));class a extends r.default{createNewUser(e){return s(this,void 0,void 0,(function*(){const t=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return 422===t.status&&alert("Incorrect e-mail or password"),yield t.json()}))}signIn(e){return s(this,void 0,void 0,(function*(){const t=yield fetch(`https://${this.backendDeploy}.herokuapp.com/signin`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return 403===t.status&&alert("Incorrect e-mail or password"),404===t.status&&alert("Couldn't find a user with this email"),yield t.json()}))}getNewUserTokens(e){return s(this,void 0,void 0,(function*(){const t=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${e}/tokens`,{method:"GET",headers:{Accept:"application/json"}}),n=yield t.json();return localStorage.setItem("token",n.token),localStorage.setItem("refreshToken",n.refreshToken),n}))}}t.default=a},861:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function i(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}d((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(574)),a=o(n(221)),i=new r.default;class d extends a.default{getWordsOnPage(e,t){return s(this,void 0,void 0,(function*(){const n=yield fetch(`https://${this.backendDeploy}.herokuapp.com/words?page=${t.toString()}&group=${e.toString()}`,{method:"GET",headers:{Accept:"application/json"}});return yield n.json()}))}changeUserWordDifficulty(e,t,n={}){return s(this,void 0,void 0,(function*(){const s=localStorage.getItem("userId"),o=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${s}/words/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(401===o.status)i.tokenOutOfTime();else if(404===o.status)this.createUserWord(e,t,n).catch((e=>console.error(e)));else{const n=yield o.json();this.updateUserWord(e,t,n.optional).catch((e=>console.error(e)))}}))}getWordDifficulty(e){return s(this,void 0,void 0,(function*(){let t="normal";const n=localStorage.getItem("userId"),s=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${n}/words/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(401===s.status)i.tokenOutOfTime();else if(404===s.status)t="normal";else{const e=yield s.json();e.difficulty&&"normal"!==e.difficulty?"hard"===e.difficulty?t="hard":"learned"===e.difficulty&&(t="learned"):t="normal"}return t}))}createUserWord(e,t,n={}){return s(this,void 0,void 0,(function*(){const s=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${localStorage.getItem("userId")}/words/${e}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({difficulty:t,optional:n})});return yield s.json()}))}updateUserWord(e,t,n={}){return s(this,void 0,void 0,(function*(){const s=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${localStorage.getItem("userId")}/words/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({difficulty:t,optional:n})});return yield s.json()}))}getAllUserWords(){return s(this,void 0,void 0,(function*(){const e=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${localStorage.getItem("userId")}/words`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});return 402!==e.status&&401!==e.status||i.tokenOutOfTime(),yield e.json()}))}getFilteredWords(e){return s(this,void 0,void 0,(function*(){let t=[];const n=yield fetch(`https://${this.backendDeploy}.herokuapp.com/users/${localStorage.getItem("userId")}/aggregatedWords?filter=%7B%22userWord.difficulty%22%3A%22${e}%22%7D`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});return 401===n.status?i.tokenOutOfTime():t=(yield n.json())[0].paginatedResults,t}))}}t.default=d},660:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function a(e){try{d(s.next(e))}catch(e){r(e)}}function i(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}d((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(861));n(129);const a=o(n(20)),i=new r.default;class d extends a.default{constructor(){super(),this.numOfChapters=6,this.choosedChapter=0,this.currentPage=localStorage.getItem("currentBookPage")?+localStorage.getItem("currentBookPage"):0,this.numOfPages=30,this.isAuthorized=Boolean(localStorage.getItem("userId")),this.words=[],this.numOfQuestions=30,this.userWords=[],this.wordsDifficulty=[]}renderChapterChoose(){const e=document.createElement("div");if(e.classList.add("game__chapter"),"true"===localStorage.getItem("isFromBook")){const t=this.renderChapterText();e.append(t)}else{const t=document.createElement("p");t.classList.add("game__chapter_select_text"),t.innerText="Выберите уровень:";const n=this.renderChapterInput();e.append(t,n)}return e}renderChapterText(){const e=document.createElement("p");e.classList.add("game__chapter_text"),this.choosedChapter=localStorage.getItem("currentChapter")?+localStorage.getItem("currentChapter"):0;const t=this.choosedChapter+1;return e.innerText=`Уровень ${t}`,e}renderChapterInput(){const e=document.createElement("select");e.classList.add("game__chapter_select"),e.name="chapter";for(let t=0;t<this.numOfChapters;t+=1){const n=document.createElement("option");n.classList.add("game__chapter_option"),n.value=t.toString(),n.innerText=`Уровень ${(t+1).toString()}`,e.append(n)}return e.addEventListener("change",(()=>{this.choosedChapter=+e.value})),e}getWords(e,t){return s(this,void 0,void 0,(function*(){if(this.words.length>=this.numOfQuestions)this.words.length=this.numOfQuestions,this.isAuthorized&&(this.wordsDifficulty.length=this.numOfQuestions);else if(this.isAuthorized){const n=yield i.getAllUserWords();this.userWords.push(...n);const s=yield i.getWordsOnPage(e,t);this.words.push(...s);for(let e=0;e<s.length;e+=1){const t=s[e].id||s[e]._id;let n="normal";for(let e=0;e<this.userWords.length;e+=1)this.userWords[e].wordId===t&&(n=this.userWords[e].difficulty);this.wordsDifficulty.push(n)}}else{const n=yield i.getWordsOnPage(e,t);this.words.push(...n),t>0?this.getWords(e,t-1).catch((e=>console.error(e))):0===t&&e>0&&this.getWords(e-1,t).catch((e=>console.error(e)))}t>0?yield this.getWords(e,t-1).catch((e=>console.error(e))):0===t&&e>0?yield this.getWords(e-1,this.numOfPages-1).catch((e=>console.error(e))):0===t&&0===e&&this.words.length>30&&(this.words.length=this.numOfQuestions,this.wordsDifficulty.length=this.numOfQuestions)}))}randomInteger(e,t){const n=e-.5+Math.random()*(t-e+1);return Math.round(n)}shuffleArray(e){const t=e.slice();for(let e=t.length-1;e>0;e-=1){const n=Math.floor(Math.random()*e),s=t[e];t[e]=t[n],t[n]=s}return t}}t.default=d},20:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authors=void 0,n(686);const o=new(s(n(574)).default);t.authors=[{name:"Никита",fullName:"Комякевич Никита",photo:"./assets/user-mal.png",position:"developer",made:"Спринт",shortlink:"nikitsch"},{name:"Юля",fullName:"Дубовик Юлия",photo:"./assets/user-fem.png",position:"developer",made:"Главная страница, авторизация, учебник, аудиовызов",shortlink:"yuliya-d98"}],t.default=class{constructor(){this.body=document.body,this.isAuthorized=Boolean(localStorage.getItem("token"))}renderHeader(){const e=document.createElement("header");e.classList.add("header");const t=document.createElement("div");t.classList.add("container");const n=document.createElement("div");n.classList.add("header__links");const s=document.createElement("a");s.classList.add("header__links-link"),s.innerText="Главная",s.href="#main-page",n.append(s);const r=document.createElement("a");r.classList.add("header__links-link"),r.innerText="Учебник",r.href="#book-page",n.append(r);const a=document.createElement("a");a.classList.add("header__links-link"),a.innerText="Аудиовызов",a.href="#audiocall-page",a.addEventListener("click",(e=>{e.preventDefault(),this.changeIsFromBook(),window.location.hash="audiocall-page"})),n.append(a);const i=document.createElement("a");i.classList.add("header__links-link"),i.innerText="Спринт",i.href="#sprint-page",i.addEventListener("click",(e=>{e.preventDefault(),this.changeIsFromBook(),window.location.hash="sprint-page"})),n.append(i);const d=document.createElement("a");d.classList.add("header__links-link"),d.innerText="Статистика",d.href="#statistics-page",n.append(d),t.append(n);const c=document.createElement("div");c.classList.add("header__autorization"),c.addEventListener("click",(()=>{o.open()})),c.innerHTML='<svg focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"></path></svg>',t.append(c),e.append(t),this.body.append(e)}changeIsFromBook(){localStorage.setItem("isFromBook",("#book-page"===window.location.hash).toString())}renderFooter(){const e=document.createElement("footer");e.classList.add("footer");const n=document.createElement("div");n.classList.add("container");const s=document.createElement("div");s.classList.add("footer__authors");for(let e=0;e<t.authors.length;e+=1){const n=document.createElement("a");n.classList.add("footer__authors-author"),n.innerText=t.authors[e].fullName,n.href=`https://github.com/${t.authors[e].shortlink}`,s.append(n)}n.append(s);const o=document.createElement("p");o.classList.add("footer__text"),o.innerText="2022",n.append(o);const r=document.createElement("a");r.classList.add("footer__logo"),r.href="https://rs.school/",n.append(r),e.append(n),this.body.append(e)}}},549:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ChapterNames=void 0,t.ChapterNames=["Раздел 1","Раздел 2","Раздел 3","Раздел 4","Раздел 5","Раздел 6","Слова, отмеченные как сложные","Слова, отмеченные как изученные"]},91:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(243);const o=s(n(660)),r=new(s(n(861)).default);class a extends o.default{constructor(){super(),this.currentQuestionNumber=0,this.answerOptions=[],this.rightAnswers=[],this.wrongAnswers=[],this.isAnswers=!1,this.isModal=!1}render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("div");e.classList.add("audiocall__background");const t=document.createElement("div");t.classList.add("section-container");const n=this.renderSplashScreen();t.append(n),e.append(t),this.body.append(e)}renderSplashScreen(){const e=document.createElement("section");e.classList.add("audiocall__screen");const t=document.createElement("h3");t.classList.add("audiocall__screen_header"),t.innerText="Аудиовызов",e.append(t);const n=document.createElement("p");n.classList.add("audiocall__screen_text","rules"),n.innerText="В этой игре Вам нужно узнать слово по произношению и выбрать его перевод среди предложенных слов.",e.append(n);const s=document.createElement("ul");s.classList.add("audiocall__screen_text"),s.innerText="Кроме мыши можно использовать клавиатуру:";const o=document.createElement("li");o.classList.add("audiocall__screen_text"),o.innerText="для выбора варианта ответа используйте клавиши от 1 до 5;";const r=document.createElement("li");r.classList.add("audiocall__screen_text"),r.innerText="используйте пробел для повторного звучания слова;";const a=document.createElement("li");a.classList.add("audiocall__screen_text"),a.innerText="и Enter чтобы закрыть окно с правильным ответом и перейти к следующему вопросу.",s.append(o,r,a),e.append(s);const i=this.renderChapterChoose();e.append(i);const d=document.createElement("div");return d.classList.add("audiocall__screen_start-btn"),d.innerText="Начать игру",d.addEventListener("click",(()=>{this.startGame()})),e.append(d),e}startGame(){this.words=[],this.wordsDifficulty=[],this.getWords(this.choosedChapter,this.currentPage).then((()=>this.renderQuestion())).catch((e=>console.error(e)))}renderQuestion(){this.currentQuestionNumber=0;const e=document.createElement("div");e.classList.add("question__container");const t=document.createElement("div");t.classList.add("question__close"),t.innerText="X",t.addEventListener("click",(()=>{this.closeGame()})),e.append(t);const n=document.createElement("div");n.classList.add("question__circles");for(let e=0;e<this.numOfQuestions;e+=1){const e=document.createElement("div");e.classList.add("question__circles_circle"),n.append(e)}e.append(n),document.querySelector(".section-container").append(e),this.nextQuestion()}nextQuestion(){const e=this.words[this.currentQuestionNumber],t=document.querySelector(".question__container"),n=new Audio;n.src=`https://${r.backendDeploy}.herokuapp.com/${e.audio}`;const s=document.createElement("div");s.classList.add("question__sound-btn"),s.innerHTML='<svg class="MuiSvgIcon-root jss147" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',s.addEventListener("click",(()=>{n.play().catch((e=>console.error(e)))})),t.append(s),this.createAnswerOptions();const o=document.createElement("div");o.classList.add("question__answer-options");for(let e=0;e<this.answerOptions.length;e+=1){const t=document.createElement("p");t.classList.add("question__answer-option"),t.dataset.answer=this.answerOptions[e],t.innerText=`${(e+1).toString()}. ${this.answerOptions[e]}`,o.append(t)}o.addEventListener("click",(t=>{if(t.target.closest(".question__answer-option")){this.isAnswers=!1;const n=t.target.closest(".question__answer-option").dataset.answer===e.wordTranslate;document.querySelectorAll(".question__circles_circle")[this.currentQuestionNumber].classList.add(n?"right":"wrong"),n?this.rightAnswers.push(e):this.wrongAnswers.push(e),this.openModal(n)}})),t.append(o),this.isAnswers=!0,document.addEventListener("keydown",this.keys.bind(this)),n.play().catch((e=>console.error(e)))}enterKey(e){this.isModal&&"Enter"===e.key&&(e.preventDefault(),this.closeModal())}keys(e){if(this.isAnswers){e.preventDefault();const t=document.querySelector(".question__sound-btn");" "===e.key&&t.click();const n=document.querySelectorAll(".question__answer-option");"1"===e.key&&n[0].click(),"2"===e.key&&n[1].click(),"3"===e.key&&n[2].click(),"4"===e.key&&n[3].click(),"5"===e.key&&n[4].click()}}openModal(e){document.removeEventListener("keydown",this.keys.bind(this));const t=this.words[this.currentQuestionNumber],n=document.createElement("div");n.classList.add("modal__background"),n.addEventListener("click",(()=>{this.closeModal()}));const s=document.createElement("div");s.classList.add("modal");const o=document.createElement("div");o.classList.add("modal__close"),o.innerText="X",o.addEventListener("click",(()=>{this.closeModal()}));const a=document.createElement("p");a.classList.add("modal__result"),a.innerText=e?"Верно":"Неверно";const i=document.createElement("img");i.classList.add("modal__image"),i.src=`https://${r.backendDeploy}.herokuapp.com/${t.image}`;const d=document.createElement("p");d.classList.add("modal__text"),d.innerText=`${t.word} - ${t.wordTranslate}`,s.append(o,a,i,d),document.querySelector(".section-container").append(n,s),this.isModal=!0,document.addEventListener("keydown",this.enterKey.bind(this))}closeModal(){this.isModal=!1;const e=document.querySelector(".modal__background");null==e||e.remove();const t=document.querySelector(".modal");null==t||t.remove();const n=document.querySelector(".question__sound-btn");null==n||n.remove();const s=document.querySelector(".question__answer-options");null==s||s.remove(),this.currentQuestionNumber+=1,this.currentQuestionNumber===this.words.length?(this.closeGame(),this.openResults()):this.nextQuestion()}openResults(){const e=document.createElement("div");e.classList.add("result__background"),e.addEventListener("click",(()=>{this.closeResults()}));const t=document.createElement("div");t.classList.add("result");const n=document.createElement("div");n.classList.add("result__close"),n.innerText="X",n.addEventListener("click",(()=>{this.closeResults()})),t.append(n);const s=document.createElement("div");if(s.classList.add("result__inner-container"),this.wrongAnswers.length){const e=document.createElement("p");e.classList.add("result__header"),e.innerText="Ошибок";const t=document.createElement("p");t.classList.add("result__header_number","wrong"),t.innerText=this.wrongAnswers.length.toString(),s.append(e,t);for(let e=0;e<this.wrongAnswers.length;e+=1)this.addWordToResults(this.wrongAnswers[e],s)}if(this.wrongAnswers.length&&this.rightAnswers.length){const e=document.createElement("hr");e.classList.add("result__line"),s.append(e)}if(this.rightAnswers.length){const e=document.createElement("p");e.classList.add("result__header"),e.innerText="Знаю";const t=document.createElement("p");t.classList.add("result__header_number","right"),t.innerText=this.rightAnswers.length.toString(),s.append(e,t);for(let e=0;e<this.rightAnswers.length;e+=1)this.addWordToResults(this.rightAnswers[e],s)}t.append(s),document.querySelector(".section-container").append(e,t)}closeResults(){const e=document.querySelector(".result__background"),t=document.querySelector(".result");null==e||e.remove(),null==t||t.remove(),this.rightAnswers=[],this.wrongAnswers=[]}addWordToResults(e,t){const n=document.createElement("div");n.classList.add("result__word");const s=document.createElement("div");s.classList.add("result__word_sound"),s.innerHTML='<svg class="MuiSvgIcon-root jss147" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',s.addEventListener("click",(()=>{new Audio(`https://${r.backendDeploy}.herokuapp.com/${e.audio}`).play().catch((e=>console.error(e)))}));const o=document.createElement("p");o.classList.add("result__word_text"),o.innerHTML=`<b>${e.word}</b> - ${e.wordTranslate}`,n.append(s,o),t.append(n)}closeGame(){document.querySelector(".question__container").remove()}createAnswerOptions(){for(this.answerOptions=[this.words[this.currentQuestionNumber].wordTranslate];this.answerOptions.length<5;){const e=this.randomInteger(0,this.words.length-1),t=this.words[e].wordTranslate;this.answerOptions.includes(t)||this.answerOptions.push(t)}this.answerOptions=this.shuffleArray(this.answerOptions)}}t.default=a},790:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(23);const o=s(n(861)),r=s(n(20)),a=n(549),i=new o.default;class d extends r.default{constructor(){super(),this.currentChapter=+localStorage.getItem("currentChapter")||0,this.chapters=6,this.pageNumber=+localStorage.getItem("currentBookPage")||0,this.pages=30,this.isDifficultWords=!1,this.userWords=null}render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("section");e.classList.add("book");const t=document.createElement("div");t.classList.add("section-container");const n=this.renderChapters(),s=document.createElement("h2");s.innerText=a.ChapterNames[this.currentChapter],s.classList.add("book__header");const o=this.currentChapter<this.chapters?this.renderPagination():"";t.append(n,s,o);const r=document.createElement("div");r.classList.add("book__words"),t.append(r),e.append(t),this.body.append(e),this.renderWords(),this.renderFooter()}renderChapters(){const e=document.createElement("div");e.classList.add("book__chapters");for(let t=0;t<this.chapters;t+=1){const n=document.createElement("p");n.classList.add("book__chapters_chapter"),this.currentChapter===t&&n.classList.add("showing"),n.innerText=(t+1).toString(),n.dataset.chapter=t.toString(),e.append(n)}const t=document.createElement("p");t.classList.add("book__chapters_chapter"),this.currentChapter===this.chapters&&t.classList.add("showing"),t.innerText="Сложные слова",t.dataset.chapter=this.chapters.toString();const n=document.createElement("p");return n.classList.add("book__chapters_chapter"),this.currentChapter===this.chapters+1&&n.classList.add("showing"),n.innerText="Изученные слова",n.dataset.chapter=(this.chapters+1).toString(),this.isAuthorized&&e.append(t,n),e.addEventListener("click",(e=>{if(e.target.closest(".book__chapters_chapter")){const t=e.target.closest(".book__chapters_chapter");t.classList.contains("showing")||(this.currentChapter=+t.dataset.chapter,localStorage.setItem("currentChapter",t.dataset.chapter),this.render())}})),e}renderPagination(){const e=document.createElement("div");e.classList.add("book__pagination");const t=document.createElement("p");t.classList.add("book__pagination_btn"),t.innerText="<<",t.addEventListener("click",(()=>{this.pageNumber=0,localStorage.setItem("currentBookPage",this.pageNumber.toString()),this.render()})),e.append(t);const n=document.createElement("p");n.classList.add("book__pagination_btn"),n.innerText="<",n.addEventListener("click",(()=>{this.pageNumber=0===this.pageNumber?0:this.pageNumber-1,localStorage.setItem("currentBookPage",this.pageNumber.toString()),this.render()})),e.append(n);const s=document.createElement("p");s.classList.add("book__pagination_btn"),s.innerText=(this.pageNumber+1).toString(),e.append(s);const o=document.createElement("p");o.classList.add("book__pagination_btn"),o.innerText=">",o.addEventListener("click",(()=>{this.pageNumber=this.pageNumber===this.pages-1?this.pageNumber:this.pageNumber+1,localStorage.setItem("currentBookPage",this.pageNumber.toString()),this.render()})),e.append(o);const r=document.createElement("p");return r.classList.add("book__pagination_btn"),r.innerText=">>",r.addEventListener("click",(()=>{this.pageNumber=this.pages-1,localStorage.setItem("currentBookPage",this.pageNumber.toString()),this.render()})),e.append(r),e}renderAnonymousWords(e){this.isDifficultWords=!1,i.getWordsOnPage(this.currentChapter,this.pageNumber).then((t=>{e.innerHTML="";for(let e=0;e<t.length;e+=1)this.renderWord(t[e])})).catch((e=>console.error(e)))}renderAuthorizedWords(e){this.isDifficultWords=!1,i.getAllUserWords().then((t=>{this.userWords=t,i.getWordsOnPage(this.currentChapter,this.pageNumber).then((t=>{e.innerHTML="";for(let e=0;e<t.length;e+=1){const n=t[e].id||t[e]._id;let s="normal";for(let e=0;e<this.userWords.length;e+=1)this.userWords[e].wordId===n&&(s=this.userWords[e].difficulty);this.renderWord(t[e],s)}})).catch((e=>console.error(e)))})).catch((e=>console.error(e)))}renderDifficultWords(e){this.isDifficultWords=!0,i.getFilteredWords("hard").then((t=>{if(e.innerHTML="",0!==t.length)for(let e=0;e<t.length;e+=1)this.renderWord(t[e]);else this.renderEmptyPage(e)})).catch((e=>console.error(e)))}renderEmptyPage(e){const t=document.createElement("p");t.innerText="Нет слов, соответствующих запросу",e.append(t)}renderLearnedWords(e){this.isDifficultWords=!0,i.getFilteredWords("learned").then((t=>{if(e.innerHTML="",0!==t.length)for(let e=0;e<t.length;e+=1)this.renderWord(t[e]);else this.renderEmptyPage(e)})).catch((e=>console.error(e)))}renderWords(){const e=document.querySelector(".book__words");this.isAuthorized?this.isAuthorized&&this.currentChapter<this.chapters?this.renderAuthorizedWords(e):this.isAuthorized&&this.currentChapter===this.chapters?this.renderDifficultWords(e):this.renderLearnedWords(e):this.renderAnonymousWords(e)}renderWord(e,t="normal"){const n=document.createElement("div");n.classList.add("word",t),n.dataset.wordId=e.id||e._id;const s=document.createElement("img");s.classList.add("word__image"),s.src=`https://${i.backendDeploy}.herokuapp.com/${e.image}`,s.alt=e.wordTranslate,n.append(s);const o=document.createElement("div");o.classList.add("word__container");const r=document.createElement("p");r.classList.add("word__transcription"),r.innerText=`${e.word} - ${e.transcription}`;const a=document.createElement("div");a.classList.add("word__sound"),a.innerHTML='<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg>',a.addEventListener("click",(()=>{const t=new Audio;t.src=`https://${i.backendDeploy}.herokuapp.com/${e.audio}`;const n=new Audio;n.src=`https://${i.backendDeploy}.herokuapp.com/${e.audioMeaning}`;const s=new Audio;s.src=`https://${i.backendDeploy}.herokuapp.com/${e.audioExample}`,t.addEventListener("ended",(()=>{n.play().catch((e=>console.error(e)))})),n.addEventListener("ended",(()=>{s.play().catch((e=>console.error(e)))})),t.play().catch((e=>console.error(e)))}));const d=document.createElement("p");d.classList.add("word__transcription","rus"),d.innerText=e.wordTranslate;const c=document.createElement("p");c.classList.add("word__text"),c.innerHTML=e.textMeaning;const l=document.createElement("p");l.classList.add("word__text","rus"),l.innerText=e.textMeaningTranslate;const u=document.createElement("p");u.classList.add("word__text"),u.innerHTML=e.textExample;const h=document.createElement("p");h.classList.add("word__text","rus"),h.innerText=e.textExampleTranslate,o.append(r,a,d,c,l,u,h),this.isAuthorized&&!this.isDifficultWords&&n.classList.contains("normal")?this.addDifAndLearnedBtnsTo(o,n.dataset.wordId):this.isAuthorized&&this.isDifficultWords&&this.addRemoveFromDifficultBtn(o,n.dataset.wordId),n.append(o);const p=document.querySelector(".book__words");null==p||p.append(n)}addDifAndLearnedBtnsTo(e,t){const n=document.createElement("div");n.classList.add("word__btn","difficult"),n.innerText="Добавить в сложные",n.addEventListener("click",(()=>{this.addUserWordToDifficulty("hard",t)}));const s=document.createElement("div");s.classList.add("word__btn","learned"),s.innerText="Добавить в изученные",s.addEventListener("click",(()=>{this.addUserWordToDifficulty("learned",t)})),e.append(n,s)}addUserWordToDifficulty(e,t){let n=!1;for(let e=0;e<this.userWords.length;e+=1)this.userWords[e].wordId===t&&(n=!0);n?i.changeUserWordDifficulty(t,e).then((()=>{this.render()})).catch((e=>console.error(e))):i.createUserWord(t,e).then((()=>{this.render()})).catch((e=>console.error(e)))}addRemoveFromDifficultBtn(e,t){const n=document.createElement("div");n.classList.add("word__btn","remove"),n.innerText="X",n.addEventListener("click",(()=>{i.updateUserWord(t,"normal").then((()=>{this.render()})).catch((e=>console.error(e)))})),e.prepend(n)}}t.default=d},95:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(20));class r extends o.default{render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("div");e.classList.add("background");const t=document.createElement("div");t.classList.add("section-container");const n=document.createElement("p");n.innerText="Страница не найдена",t.append(n),e.append(t),this.body.append(e),this.renderFooter()}}t.default=r},574:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(297);const o=new(s(n(704)).default);t.default=class{constructor(){this.body=document.body,this.isRegistration=!0,this.isAuthorized=Boolean(localStorage.getItem("token")),this.isUserOpened=!1}tokenOutOfTime(){this.logOut(),this.isRegistration=!1,this.openModal()}open(){this.isAuthorized&&!this.isUserOpened?this.showUser():this.isAuthorized&&this.isUserOpened?this.closeUser():this.openModal()}showUser(){const e=document.createElement("div");e.classList.add("user");const t=document.createElement("p");t.classList.add("user__name"),t.innerText="Твой юзернейм:",e.append(t);const n=document.createElement("p");n.classList.add("user__name"),n.innerText=localStorage.getItem("name")||"no username",e.append(n);const s=document.createElement("div");s.classList.add("user__logout"),s.innerText="Выйти",s.addEventListener("click",(()=>{this.logOut(),this.closeUser()})),e.append(s);const o=document.querySelectorAll(".container")[0];null==o||o.append(e),this.isUserOpened=!0}logOut(){localStorage.removeItem("name"),localStorage.removeItem("userId"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}closeUser(){const e=document.querySelector(".user");null==e||e.remove(),this.isUserOpened=!1}openModal(){const e=document.createElement("div");e.classList.add("authorization__background"),e.addEventListener("click",(()=>{this.closeModal()})),this.body.append(e);const t=document.createElement("div");t.classList.add("authorization__container");const n=document.createElement("div");n.classList.add("authorization__close-btn"),n.innerText="X",n.addEventListener("click",(()=>{this.closeModal()})),t.append(n);const s=document.createElement("input");s.classList.add("authorization__radio"),s.type="radio",s.checked=this.isRegistration,s.id="registration",s.name="authorization",s.addEventListener("change",(()=>{this.openForm()})),t.append(s);const o=document.createElement("label");o.classList.add("authorization__label"),o.htmlFor="registration",o.innerText="Регистрация",t.append(o);const r=document.createElement("input");r.classList.add("authorization__radio"),r.type="radio",r.checked=!this.isRegistration,r.id="sign-in",r.name="authorization",r.addEventListener("change",(()=>{this.openForm()})),t.append(r);const a=document.createElement("label");a.classList.add("authorization__label"),a.htmlFor="sign-in",a.innerText="Войти",t.append(a);const i=document.createElement("form");i.classList.add("authorization__forms"),t.append(i),this.body.append(t),this.openForm()}openForm(){document.querySelector(".authorization__forms").innerHTML="";const e=document.querySelectorAll(".authorization__radio")[0];this.isRegistration=e.checked,this.isRegistration?this.openRegistration():this.openSignIn()}openRegistration(){const e=document.querySelector(".authorization__forms"),t=document.createElement("label");t.classList.add("authorization__forms_label"),t.htmlFor="name",t.innerText="Имя пользователя",e.append(t);const n=document.createElement("input");n.classList.add("authorization__forms_input"),n.type="text",n.placeholder="username",n.required=!0,e.append(n);const s=document.createElement("label");s.classList.add("authorization__forms_label"),s.htmlFor="mail",s.innerText="Адрес электронной почты",e.append(s);const r=document.createElement("input");r.classList.add("authorization__forms_input"),r.type="email",r.placeholder="example@gmail.com",r.required=!0,r.autocomplete="email",e.append(r);const a=document.createElement("label");a.classList.add("authorization__forms_label"),a.htmlFor="password",a.innerText="Пароль",e.append(a);const i=document.createElement("input");i.classList.add("authorization__forms_input"),i.type="password",i.minLength=8,i.maxLength=20,i.placeholder="********",i.required=!0,i.autocomplete="new-password",e.append(i);const d=document.createElement("button");return d.classList.add("authorization__forms_submit-btn"),d.type="submit",d.innerText="Зарегистрироваться",d.addEventListener("click",(e=>{e.preventDefault(),n.validity.valid&&r.validity.valid&&i.validity.valid&&o.createNewUser({name:n.value,email:r.value,password:i.value}).then((e=>(localStorage.setItem("name",e.name),localStorage.setItem("userId",e.id),e))).then((()=>{o.signIn({email:r.value,password:i.value}).then((e=>{localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),this.closeModal(),this.isAuthorized=!0})).catch((e=>console.error(e)))})).catch((e=>console.error(e)))})),e.append(d),e}openSignIn(){const e=document.querySelector(".authorization__forms"),t=document.createElement("label");t.classList.add("authorization__forms_label"),t.htmlFor="mail",t.innerText="Адрес электронной почты",e.append(t);const n=document.createElement("input");n.classList.add("authorization__forms_input"),n.type="email",n.placeholder="example@gmail.com",n.required=!0,n.autocomplete="email",e.append(n);const s=document.createElement("label");s.classList.add("authorization__forms_label"),s.htmlFor="password",s.innerText="Пароль",e.append(s);const r=document.createElement("input");r.classList.add("authorization__forms_input"),r.type="password",r.minLength=8,r.maxLength=20,r.placeholder="********",r.required=!0,r.autocomplete="current-password",e.append(r);const a=document.createElement("button");return a.classList.add("authorization__forms_submit-btn"),a.type="submit",a.innerText="Войти",a.addEventListener("click",(e=>{e.preventDefault(),o.signIn({email:n.value,password:r.value}).then((e=>{localStorage.setItem("name",e.name),localStorage.setItem("userId",e.userId),o.getNewUserTokens(e.userId).then((e=>{localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken)})).then((()=>{this.closeModal()})).catch((e=>console.error(e)))})).catch((e=>console.error(e)))})),e.append(a),e}closeModal(){const e=document.querySelector(".authorization__background"),t=document.querySelector(".authorization__container");null==e||e.remove(),null==t||t.remove()}}},312:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),n(138);const a=r(n(20)),i=[{header:"Запоминай",text:"Для лучшего понимания сложных слов отмечай их и повторяй отдельно"},{header:"Изучай",text:"Библиотека из 4000 часто встречающихся слов. Изучай в своем темпе"},{header:"Играй",text:"Для лучшего запоминания играй и делись результатами с другими"},{header:"Анализируй",text:"Подробная статистика твоих достижений, изученных слов и ошибок"}];class d extends a.default{render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("div");e.classList.add("main__background");const t=document.createElement("section");t.classList.add("section-container");const n=document.createElement("h1");n.classList.add("main__header"),n.innerText="RS Lang";const s=this.aboutApp(),o=this.aboutAuthors();t.append(n,s,o),e.append(t),this.body.append(e),this.aboutApp(),this.aboutAuthors(),this.renderFooter()}aboutApp(){const e=document.createElement("div");e.classList.add("about-app");const t=document.createElement("h2");t.classList.add("about-app__header"),t.innerText="Немного о rslang",e.append(t);for(let t=0;t<i.length;t+=1){const n=this.createCardAboutApp(i[t].header,i[t].text);e.append(n)}return e}createCardAboutApp(e,t){const n=document.createElement("div");n.classList.add("about-app__card");const s=document.createElement("h3");s.classList.add("about-app__card_header"),s.innerText=e,n.append(s);const o=document.createElement("p");return o.classList.add("about-app__card_text"),o.innerText=t,n.append(o),n}aboutAuthors(){const e=document.createElement("div");e.classList.add("about-authors");const t=document.createElement("h2");t.classList.add("about-authors__header"),t.innerText="И немного о нас",e.append(t);const n=document.createElement("div");n.classList.add("about-authors__cards");for(let e=0;e<a.authors.length;e+=1){const t=this.createCardAboutAuthor(a.authors[e]);n.append(t)}return e.append(n),e}createCardAboutAuthor(e){const t=document.createElement("a");t.classList.add("about-authors__card"),t.href=`https://github.com/${e.shortlink}`,t.target="_blank";const n=document.createElement("img");n.classList.add("about-authors__card_image"),n.src=e.photo,t.append(n);const s=document.createElement("h3");s.classList.add("about-authors__card_name"),s.innerText=e.name,t.append(s);const o=document.createElement("p");o.classList.add("about-authors__card_position"),o.innerText=e.position,t.append(o);const r=document.createElement("p");return r.classList.add("about-authors__card_made"),r.innerText=e.made,t.append(r),t}}t.default=d},993:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(20));class r extends o.default{render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("div");e.classList.add("background");const t=document.createElement("div");t.classList.add("section-container");const n=document.createElement("p");n.innerText="Sprint page",t.append(n),e.append(t),this.body.append(e)}}t.default=r},760:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(20));class r extends o.default{render(){this.body.innerHTML="",this.renderHeader();const e=document.createElement("div");e.classList.add("background");const t=document.createElement("div");t.classList.add("section-container");const n=document.createElement("p");n.innerText="Statistics page",t.append(n),e.append(t),this.body.append(e),this.renderFooter()}}t.default=r}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();
